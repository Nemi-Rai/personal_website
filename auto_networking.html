<!DOCTYPE html>
<html lang="en">
    <head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

    <link rel="stylesheet" href="css/style.css">


    <title>Nemi Rai</title>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    </head>

    <body>
	
		<!-- Navigation bar -->
	<nav class="navbar navbar-expand-sm navbar-dark fixed-top" style="background-color: #050505;" id="navbar">
		<div class="container-fluid" style="background-color: #050505;">
			<a class="navbar-brand" href="index.html">NemiRai.com</a>
			<button class="navbar-toggler dropdown-menu-end" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" style="background-color: #050505;" id="navbarSupportedContent">
				<ul class="navbar-nav navbar-right nav-pills me-auto">
					<li class="nav-item"><a class="nav-link" href="https://github.com/Nemi-Rai/" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-2x social-icon"></i></a></li>
					<li class="nav-item"><a class="nav-link" href="https://www.linkedin.com/in/nemi-rai/" target="_blank" rel="noopener noreferrer"><i class="fa fa-linkedin-square fa-2x social-icon"></i></a></li>
				</ul>
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="index.html#about">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="index.html#projects">Projects</a>
					</li>
					<li class="nav-item">
						<a class="nav-link active" href="index.html#blog">Blog</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div id="vantajs" style="height:100%;">
		<!-- Title -->
		<div class="container align-items-center" style="margin-top: 5rem;">
			<h3 id="title">
				Automotive Networking
			</h3>
			<hr/>
			<div class="row info_block">
				<div class="col-auto col-md-auto">
					<p>Author: Nemi Rai</p>
				</div>
				<div class="col-auto col-md-auto">
					<p>Date: July 2022</p>
				</div>
			</div>
			<hr/>
		</div>

		<!-- Main container -->
		<div class="container mt-2">
			<div class="row">
				<div class="col-12 col-md-12">
					<div class="col-12 info_block" style="text-align: justify;">
						<h5 class = "heading" style="font-weight: bold; color: #ffffff">
							Introduction
						</h5>
						<p>
							Vehicles have evolved a lot over the past few decades to become a computer network on wheels.
							This network is made up of embedded systems called Electronic Control Units (ECUs) and the mechanical
							parts that they interface with such as sensors and actuators. Modern cars may have up to 70 ECUs
							that control systems such as anti-lock brakes, telematic services, engine timing, entertainment, and
							more.
						</p>
						<h5 class = "heading" style="font-weight: bold; color: #ffffff">
							Cybersecurity Attack Surface and Vectors
						</h5>
						<p>
							Concern about threat actors breaking into, or stealing vehicles by bypassing security measures has grown
							over the past decade. Radio frequency replay and relay attacks have succeeded in unlocking and starting
							vehicles in the past, and manufaturers are aware of the vulnerabilities. These kinds of attacks are rare
							but not unheard of. The obfuscation of a car's mechanisms and niche knowledge needed makes performing these
							kinds of attacks difficult.
							<br><br>
							The attack surface of the modern vehicle is quite large partly because of the amount of technology packed into
							them. WiFi, BlueTooth, physical keypads, and key FOBs could all contain potential vulnerabilities. This blog
							post talks about a vehicle system that governs the transfer of information to and from all the different systems
							within a vehicle, and therefore controlling the vehicle. This system does not usually have remote access to a user,
							authorized or not, although technologies such as Telematic Control Units (TCUs) are being introduced. TCUs communicate
							over cellular and are also connected to most of the vehicles subsystems, which could pose as a potential attack vector
							if exploited.
							
						</p>
						<h5 class = "heading" style="font-weight: bold; color:#ffffff">
							Vehicle Bus Protocols
						</h5>
						<p>
							A  bus protocol facilitates the communication between ECUs and other parts connected to the bus.
							Vehicles can have one or more Bus protocols depending on the category of vehicle and manufacturer.
							The Control Area Network (CAN) protcol has been standard in US-built cars and trucks since 1996;
							CAN was made mandatory in 2008 for US vehicles and 2001 for European vehicles.
						</p>
						<h5 class = "heading" style="font-weight: bold; color:#ffffff">
							Control Area Network
						</h5>
						<p>
							There are many parts to the vehicle network. Dedicated wiring, as seen in Fig 1, between every component is not
							efficient, costly, and can be near-impossible to manage with the many features in modern cars. The CAN
							protocol solves this problem by connecting ECUs and other parts to a shared wire, or bus, as seen in Fig 2.
						</p>
						<div class="row">
							<div class="col-12 col-md-6 figure">
								<img src="img/star.png" class="img-fluid rounded project-images center-fit" style="width: 70%;">
								<p>
									Figure 1: ECUs in a star-like configuration. Every node has a dedicated link to every other node in the system.
									This is an extreme case because a node might not need a connection to another node; most cars, for example, do not
									need links between the entertainment system and engine timing sensors.
								</p>
							</div>
							<div class="col-12 col-md-6 figure float-end">
								<img src="img/bus.png" class="img-fluid rounded center-fit project-image" style="width: 100%;">
								<p>
									Figure 2: ECUs in a bus configuration, each node is connected to a shared wire, or bus. When a node sends a message
									out onto the bus, every node connected to the bus will receive the message. Part of the message includes an ID field
									which identifies the intended recipient. Lower IDs have priority over higher IDs.
								</p>
							</div>
						</div>
						<h5 class = "heading" style="font-weight: bold; color:#ffffff">
							Control Area Network: Packet frame layout
						</h5>
						<p>
							CAN messages, or frames, are typically 108-bits long and include 8 fields. There are many versions of CAN, for example CAN 2.0A has 11-bit
							identifiers and CAN 2.0B has 29-bit identifiers, CAN 2.0B is used on heavy duty machinery. Fig3 below is a 108-bit CAN frame where the numbers
							indicate the number of bits per field.
						</p>
						<div>
							<img src="img/can_packet.png" class="img-fluid rounded project-image center-fit" style="width: 60%; padding-top: 2rem; padding-bottom: 2rem;">
							<p>

							</p>
						</div>
						<ul>
							<hr>
							<li>
								<b>Start of Frame</b><span class="float-end">Dominant 0 bit, if a message was not received on the bus a 1 is returned</span>
							</li>
							<hr>
							<li>
								<b>Identifier</b><span class="float-end">Can be 11-bit or 29-bit</span>
							</li>
							<hr>
							<li>
								<b>Remote Transmission Request</b><span class="float-end">Indicates whether a node is sending or receiving data</span>
							</li>
							<hr>
							<li>
								<b>Control</b><span class="float-end">Contains information about the type of ID and the length of the data</span>
							</li>
							<hr>
							<li>
								<b>Data</b><span class="float-end">Padded data bits, bit order (endian) depends on the application layer</span>
							</li>
							<hr>
							<li>
								<b>Cyclic Redundancy Check</b><span class="float-end">Checks for data corruption</span>
							</li>
							<hr>
							<li>
								<b>Acknowledgement</b><span class="float-end">Indicates if the node has received data correctly</span>
							</li>
							<hr>
							<li>
								<b>End of Frame</b><span class="float-end">Indicates the end of the CAN frame</span>
							</li>
							<hr>
						</ul>
						<h5 class = "heading" style="font-weight: bold; color:#ffffff">
							Creating a Home Lab
						</h5>
						<p>
							Safety is the number one concern when experimenting with any kind of machinery, vehicles included. If a mistake is made even in a
							controlled live experiment, it could lead to injury or a large mechanic's bill if parts need to be replaced. There are
							a few ways to create a home lab for automotive electronics. The safest and simplest way is to use a software simulator, a virtual CAN network,
							and command line tools. To take it a step further, OBD-II to USB adapters can directly interface to a physical vehicle to capture and transmit
							messages to the vehicles CAN network.
							<br><br>
							<a href="https://github.com/zombieCraig/ICSim" target="_blank" rel="noopener noreferrer">Instrument Cluster Simulator</a> is a program written in
							C that simulates a vehicle speedometer, turn signals, and door alerts. The repository also includes commands to load the CAN module from the Linux 
							kernel (assuming a Linux distribution is being used), and a small script to create a virtual CAN interface. Can-utils can be installed using a package
							manager and includes tools to capture, replay, craft, and send CAN messages.
							<br><br>
							Using ICSim and can-utils together, a CAN network can be set up virtually on a computer to safely expriment with the Control Area Network protocol. For
							example: keyboard input can control ICSim manually while can-dump is capturing CAN messages and then those packets can be replayed using can-player.
						</p>
						<hr>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="js/vanta_settings.js"></script>
    </body>
</html>
